
<html>
<head></head>
<body>
<script src="/origami.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<canvas id="canvas"  width="3000" height="3000"></canvas>
<script>

var style = {
  color: '#000',
  font: '70px Helvetica',
  align: 'center',
  border: '2px solid gold'
};

	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
	ctx.fillStyle = "rgb(200,200,200)";
	ctx.fillRect (0, 0, 3000, 3000);
	
	var xMid = 1500;
	var yMid = 1500;

	function drawFromPolar(angle, dist, color) {
		var x = Math.floor(xMid + dist*Math.cos(angle));
		let y = Math.floor(yMid + dist*Math.sin(angle));
		ctx.fillStyle = color;
		ctx.fillRect (x, y, 5, 5);
	}

	var socket = io.connect('http://10.0.0.9:8080');
	socket.on('meas', function (data) {
		
		let angle = data.angle*(90/800)*(Math.PI/180); //radians
		angle -= (Math.PI/2); // l'angle Ã  0 de A.
		drawFromPolar(angle, Math.floor(data.distA), "rgb(0,0,0)");
		drawFromPolar(angle+(Math.PI/2), Math.floor(data.distB), "rgb(200,0,0)");
		drawFromPolar(angle+(Math.PI), Math.floor(data.distC), "rgb(0,255,0)");
		drawFromPolar(angle+(3*Math.PI/2), Math.floor(data.distD), "rgb(0,0,255)");
	});
</script>
</body>
</html>